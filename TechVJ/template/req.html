<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>{{ file_name }} | Goflix</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" href="https://i.ibb.co/Z6F9WZL9/1000489714.png">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.plyr.io/3.6.12/plyr.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
<script src="https://cdn.tailwindcss.com"></script>

<style>
.card-hover:hover{
 transform: translateY(-6px);
 box-shadow: 0 0 15px rgba(255,255,255,.25);
 transition: .3s;
}
</style>
</head>

<body class="bg-black text-light">

<!-- TITLE -->
<div class="text-center p-3">
<h5 class="fw-bold">{{ file_name }}</h5>
</div>

<!-- VIDEO PLAYER -->
<div class="d-flex justify-content-center">
<div class="w-full lg:w-9/12 border border-danger p-2">
<video id="player" class="player" playsinline controls preload="auto" crossorigin="anonymous">
<source src="{{ file_url }}" type="video/mp4">
</video>
</div>
</div>

<!-- EXTERNAL PLAYERS -->
<div class="container mt-4">
<h4 class="text-warning mb-3">Play with external players</h4>

<div class="row g-3 justify-content-center">

<div class="col-5 col-lg-3">
<div onclick="vlc_player()" class="card card-body bg-dark text-center card-hover">
VLC Player
</div>
</div>

<div class="col-5 col-lg-3">
<div onclick="mx_player()" class="card card-body bg-dark text-center card-hover">
MX Player
</div>
</div>

<div class="col-5 col-lg-3">
<div onclick="km_player()" class="card card-body bg-dark text-center card-hover">
KM Player
</div>
</div>

<div class="col-5 col-lg-3">
<div onclick="playit_player()" class="card card-body bg-dark text-center card-hover">
PLAYit
</div>
</div>

<div class="col-12 mt-3">
<button onclick="downloadVideo()" class="btn btn-danger w-100">
Download Now
</button>
</div>

</div>
</div>

<div class="text-center mt-4 text-secondary">
If stream buffers, pause 2â€“3 sec and play again.
</div>

<script src="https://cdn.plyr.io/3.6.12/plyr.js"></script>

<script>
/* ================= STREAM URL ================= */
const streamUrl = "{{ file_url }}";

/* ================= PLYR FIX ================= */
const player = new Plyr('#player', {
controls: [
'play-large','play','progress','current-time',
'mute','volume','settings','fullscreen'
],
ratio: '16:9'
});

/* ================= EXTERNAL PLAYERS ================= */

function vlc_player(){
if(/Android/i.test(navigator.userAgent)){
window.location.href =
`intent://${streamUrl.replace(/^https?:\/\//,'')}#Intent;scheme=http;package=org.videolan.vlc;end`;
}else{
window.location.href = `vlc://${streamUrl}`;
}
}

function mx_player(){
window.location.href =
`intent://${streamUrl.replace(/^https?:\/\//,'')}#Intent;scheme=http;package=com.mxtech.videoplayer.ad;end`;
}

function playit_player(){
window.location.href =
`intent://playerv2/video?url=${streamUrl}#Intent;package=com.playit.videoplayer;end`;
}

function km_player(){
window.location.href =
`intent://${streamUrl.replace(/^https?:\/\//,'')}#Intent;scheme=http;package=com.kmplayer;end`;
}

function downloadVideo(){
window.open(streamUrl, "_blank");
}
</script>

</body>
</html>
